import neovim

nvim-hs

stack必須。

plugin/internal.hs
wrapPlugin :: Applicative m => Plugin env -> m NeovimPlugin

main :: IO ()
main = neovim defaultConfig
    { plugins = plugins defaultConfig ++ [hogehoge.plugin]
    }

plugin :: Neovim (StartupConfig NeovimConfig) () NeovimPlugin
plugin = wrapPlugin Plugin
    { exports         = [ $(function' 'fibonacci) Sync ]
    , statefulExports = []
    }

fibonacci :: Int -> Neovim' String
fibonacci n = return . show $ fibs !! n
  where
    fibs :: [Integer]
    fibs = 0:1:scanl1 (+) fibs

nvim-hs/library/Neovim/Main.hs

nvim-hs/executable/Main.hs
module Main where

import           Neovim       (neovim, defaultConfig)

main :: IO ()
main = neovim defaultConfig
